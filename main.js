(()=>{"use strict";function e(e,t,n){var o=t.nextElementSibling;t.classList.remove(n.inputErrorClass),o.textContent="",o.classList.remove(n.errorClass)}function t(e,t,n){e.some(function(e){return!e.validity.valid})?(t.classList.add(n.inactiveButtonClass),t.disabled=!0):(t.classList.remove(n.inactiveButtonClass),t.disabled=!1)}var n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#edit-profile-modal"),r=document.querySelector("#new-post-modal"),a=document.querySelector(".profile"),c=r.querySelector(".modal__close-btn"),i=o.querySelector(".modal__close-btn"),l=a.querySelector(".profile__add-btn"),s=a.querySelector(".profile__edit-btn"),u=o.querySelector("#profile-name-input"),d=o.querySelector("#profile-description-input"),m=document.forms["profile-form"],p=document.forms["new-post-form"],f=r.querySelector("#caption-text-input"),v=r.querySelector("#image-link-input"),_=a.querySelector(".profile__name"),y=a.querySelector(".profile__description");function S(e){e.classList.add("modal_opened"),document.addEventListener("keydown",q)}function g(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",q)}function q(e){if("Escape"===e.key){var t=document.querySelector(".modal_opened");t&&g(t)}}document.querySelectorAll(".modal").forEach(function(e){e.addEventListener("mousedown",function(t){t.target.classList.contains("modal_opened")&&g(e)})}),c.addEventListener("click",function(){g(r)}),i.addEventListener("click",function(){g(o)}),l.addEventListener("click",function(){S(r)}),s.addEventListener("click",function(){var r,a,c,i;u.value=_.textContent,d.value=y.textContent,r=m,a=n,c=Array.from(r.querySelectorAll(a.inputSelector)),i=r.querySelector(a.submitButtonSelector),c.forEach(function(t){return e(0,t,a)}),t(c,i,a),S(o)}),m.addEventListener("submit",function(e){e.preventDefault(),_.textContent=u.value,y.textContent=d.value,g(o)}),p.addEventListener("submit",function(e){e.preventDefault();var t=k({name:f.value.trim(),link:v.value.trim()});h.prepend(t),p.reset();var o=p.querySelector(n.submitButtonSelector);o.disabled=!0,o.classList.add(n.inactiveButtonClass),g(r)});var b=document.querySelector("#card-template"),h=document.querySelector(".cards__list");function k(e){var t=b.content.cloneNode(!0),n=t.querySelector(".card__image"),o=t.querySelector(".card__title"),r=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return n.src=e.link,n.alt=e.name,o.textContent=e.name,n.addEventListener("click",function(){C.textContent=e.name,L.src=e.link,L.alt=e.name,S(E)}),r.addEventListener("click",function(){var e=r.querySelector(".card__like-icon");r.classList.toggle("card__like-button_active")?e.src="./images/like-red.svg":e.src="./images/like.svg"}),a.addEventListener("click",function(){a.closest(".card").remove()}),t}var w,E=document.querySelector("#preview-modal"),L=E.querySelector(".modal__image"),C=E.querySelector(".modal__caption");E.querySelector(".modal__close-btn").addEventListener("click",function(){return g(E)}),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(function(e){var t=k(e);h.append(t)}),w=n,Array.from(document.querySelectorAll(w.formSelector)).forEach(function(n){!function(n,o){var r=Array.from(n.querySelectorAll(o.inputSelector)),a=n.querySelector(o.submitButtonSelector);t(r,a,o),r.forEach(function(n){n.addEventListener("input",function(){!function(t,n,o){n.validity.valid?e(0,n,o):function(e,t,n,o){var r=t.nextElementSibling;t.classList.add(o.inputErrorClass),r.textContent=n,r.classList.add(o.errorClass)}(0,n,n.validationMessage,o)}(0,n,o),t(r,a,o)})})}(n,w)})})();